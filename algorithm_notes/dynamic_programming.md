# åŠ¨æ€è§„åˆ’ä¸“é¢˜

æœ¬ä¸“é¢˜ç›®å½•
- [70. çˆ¬æ¥¼æ¢¯](#dp-70)
- [198. æ‰“å®¶åŠ«èˆ](#dp-198)
- [53. æœ€å¤§å­æ•°ç»„å’Œ](#dp-53)
- [322. é›¶é’±å…‘æ¢](#dp-322)
- [300. æœ€é•¿é€’å¢å­åºåˆ—](#dp-300)
- [1143. æœ€é•¿å…¬å…±å­åºåˆ—](#dp-1143)
- [516. æœ€é•¿å›æ–‡å­åºåˆ—](#dp-516)

<a id="dp-70"></a>
### 70. çˆ¬æ¥¼æ¢¯ (Easy) - DPå…¥é—¨
**çŠ¶æ€å®šä¹‰**: `dp[i]` = çˆ¬åˆ°ç¬¬ié˜¶çš„æ–¹æ³•æ•°
**è½¬ç§»æ–¹ç¨‹**: `dp[i] = dp[i-1] + dp[i-2]`
**å››ç§å®ç°**: é€’å½’ã€è®°å¿†åŒ–ã€DPã€ç©ºé—´ä¼˜åŒ–

### 198. æ‰“å®¶åŠ«èˆ (Medium) - å†³ç­–ç±»DP
**çŠ¶æ€å®šä¹‰**: `dp[i]` = å·å‰i+1é—´æˆ¿çš„æœ€å¤§é‡‘é¢
**è½¬ç§»æ–¹ç¨‹**: `dp[i] = max(nums[i] + dp[i-2], dp[i-1])`
**æ ¸å¿ƒ**: æ¯æ­¥åšé€‰æ‹©å†³ç­–ï¼Œçº¦æŸå½±å“çŠ¶æ€è½¬ç§»

<a id="dp-198"></a>
### 198. æ‰“å®¶åŠ«èˆ (Medium)

#### æ ¸å¿ƒæ€æƒ³
å†³ç­–ç±»åŠ¨æ€è§„åˆ’ç»å…¸é¢˜ï¼Œä½“ç°äº†**é€‰æ‹©å†³ç­–**çš„DPæ€ç»´ï¼šæ¯ä¸ªçŠ¶æ€é¢ä¸´å¤šç§é€‰æ‹©ï¼Œé€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆã€‚

#### å…³é”®é€»è¾‘
1. **çŠ¶æ€å®šä¹‰**:
   - `dp[i]` = å·å‰i+1é—´æˆ¿èƒ½è·å¾—çš„æœ€å¤§é‡‘é¢
   
2. **å†³ç­–åˆ†æ**:
   å¯¹äºç¬¬ié—´æˆ¿ï¼Œå°å·é¢ä¸´ä¸¤ç§é€‰æ‹©ï¼š
   - **å·ç¬¬ié—´æˆ¿**: è·å¾— `nums[i] + dp[i-2]` (ä¸èƒ½å·ç›¸é‚»æˆ¿å±‹)
   - **ä¸å·ç¬¬ié—´æˆ¿**: è·å¾— `dp[i-1]` (ä¿æŒå‰ä¸€çŠ¶æ€)

3. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**:
   ```
   dp[i] = max(nums[i] + dp[i-2], dp[i-1])
   ```

4. **è¾¹ç•Œæ¡ä»¶**:
   ```cpp
   dp[0] = nums[0]                    // åªæœ‰1é—´æˆ¿
   dp[1] = max(nums[0], nums[1])      // 2é—´æˆ¿é€‰é‡‘é¢å¤§çš„
   ```

#### å››ç§å®ç°æ–¹å¼

1) é€’å½’è§£æ³• (ä¼šè¶…æ—¶)
```cpp
int helper(vector<int>& nums, int i) {
    if (i < 0) return 0;
    return max(helper(nums, i-2) + nums[i], helper(nums, i-1));
}
```

2) è®°å¿†åŒ–æœç´¢ (è‡ªé¡¶å‘ä¸‹)
```cpp
int helperMemo(vector<int>& nums, int i, vector<int>& memo) {
    if (i < 0) return 0;
    if (i == 0) return nums[0];
    if (memo[i] != -1) return memo[i];
    
    memo[i] = max(helperMemo(nums,i-2,memo) + nums[i], 
                  helperMemo(nums,i-1,memo));
    return memo[i];
}
```

3) åŠ¨æ€è§„åˆ’ (è‡ªåº•å‘ä¸Š) â­
```cpp
int rob(vector<int>& nums) {
    int n = nums.size();
    if (n == 0) return 0;
    if (n == 1) return nums[0];
    
    vector<int> dp(n);
    dp[0] = nums[0];
    dp[1] = max(nums[0], nums[1]);
    
    for (int i = 2; i < n; i++) {
        dp[i] = max(dp[i-2] + nums[i], dp[i-1]);
    }
    return dp[n-1];
}
```

4) ç©ºé—´ä¼˜åŒ– (æ»šåŠ¨å˜é‡)
```cpp
int rob(vector<int>& nums) {
    int n = nums.size();
    if (n == 0) return 0;
    if (n == 1) return nums[0];
    
    int prev2 = nums[0];
    int prev1 = max(nums[0], nums[1]);
    
    for (int i = 2; i < n; i++) {
        int curr = max(nums[i] + prev2, prev1);
        prev2 = prev1;
        prev1 = curr;
    }
    return prev1;
}
```

#### ä¸70é¢˜çš„å…³é”®åŒºåˆ«
- **70é¢˜çˆ¬æ¥¼æ¢¯**: é€’æ¨å…³ç³» `f(n) = f(n-1) + f(n-2)` (åŠ æ³•)
- **198é¢˜æ‰“å®¶åŠ«èˆ**: å†³ç­–å…³ç³» `f(n) = max(é€‰æ‹©A, é€‰æ‹©B)` (é€‰æ‹©)

#### å†³ç­–ç±»DPç‰¹å¾
1. **å¤šç§é€‰æ‹©**: æ¯ä¸ªçŠ¶æ€é¢ä¸´2ä¸ªæˆ–æ›´å¤šé€‰æ‹©
2. **çº¦æŸæ¡ä»¶**: é€‰æ‹©ä¹‹é—´å­˜åœ¨é™åˆ¶å…³ç³»
3. **æœ€ä¼˜å†³ç­–**: ä½¿ç”¨max/minå‡½æ•°é€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆ
4. **çŠ¶æ€ä¾èµ–**: å½“å‰é€‰æ‹©å½±å“åç»­å¯é€‰æ–¹æ¡ˆ

#### å¤æ‚åº¦åˆ†æ
- é€’å½’: æ—¶é—´O(2^n)ï¼Œç©ºé—´O(n)
- è®°å¿†åŒ–: æ—¶é—´O(n)ï¼Œç©ºé—´O(n)
- DP: æ—¶é—´O(n)ï¼Œç©ºé—´O(n)
- ç©ºé—´ä¼˜åŒ–: æ—¶é—´O(n)ï¼Œç©ºé—´O(1)

#### å…³é”®ç†è§£
- **çº¦æŸå»ºæ¨¡**: ç›¸é‚»æˆ¿å±‹ä¸èƒ½åŒæ—¶å· â†’ çŠ¶æ€è½¬ç§»ä¸­ä½“ç°ä¸ºi-2è€Œä¸æ˜¯i-1
- **å†³ç­–æ€ç»´**: æ¯æ­¥éƒ½è¦é—®"æˆ‘æœ‰å“ªäº›é€‰æ‹©ï¼Ÿå“ªä¸ªæ›´ä¼˜ï¼Ÿ"
- **è®°å¿†åŒ–ç²¾é«“**: è®¡ç®— â†’ ç¼“å­˜ â†’ è¿”å›ï¼Œä¸‰æ­¥ç¼ºä¸€ä¸å¯

#### æ‰©å±•åº”ç”¨
- 213. æ‰“å®¶åŠ«èˆII (ç¯å½¢æ•°ç»„)
- 337. æ‰“å®¶åŠ«èˆIII (äºŒå‰æ ‘)
- 01èƒŒåŒ…é—®é¢˜ (ç‰©å“é€‰æ‹©å†³ç­–)

---

<a id="dp-53"></a>
### 53. æœ€å¤§å­æ•°ç»„å’Œ (Medium) - è¿ç»­å­æ•°ç»„DP
**æ ¸å¿ƒç®—æ³•**: Kadaneç®—æ³•
**è½¬ç§»æ–¹ç¨‹**: `dp[i] = max(nums[i], dp[i-1] + nums[i])`
**å…³é”®ç†è§£**: "ç»§ç»­vsé‡æ–°å¼€å§‹"çš„å†³ç­–

### 53. æœ€å¤§å­æ•°ç»„å’Œ (Medium)

#### æ ¸å¿ƒæ€æƒ³
è¿ç»­å­æ•°ç»„DPçš„ç»å…¸é¢˜ç›®ï¼Œä½¿ç”¨**Kadaneç®—æ³•**å®ç°O(n)æœ€ä¼˜è§£ï¼ŒåŒæ—¶æŒæ¡**åˆ†æ²»ç®—æ³•**çš„ä¸‰åˆ†è¦†ç›–æ€æƒ³ã€‚

#### å…³é”®é€»è¾‘
1. **è¿ç»­æ€§çº¦æŸçš„DPå»ºæ¨¡**:
   - çŠ¶æ€å®šä¹‰ï¼š`dp[i]` = ä»¥nums[i]ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œ
   - å†³ç­–é€‰æ‹©ï¼šç»§ç»­ä¹‹å‰çš„å­æ•°ç»„ vs é‡æ–°å¼€å§‹
   
2. **Kadaneç®—æ³•æ ¸å¿ƒ**:
   ```cpp
   dp[i] = max(nums[i], dp[i-1] + nums[i])
   ```
   ç›´è§‚ç†è§£ï¼šå¦‚æœä¹‹å‰ç´¯è®¡æ˜¯è´Ÿæ•°å°±æŠ›å¼ƒï¼Œå¦åˆ™ç»§ç»­ç´¯åŠ 

3. **å…¨å±€vså±€éƒ¨æœ€ä¼˜**:
   - å±€éƒ¨æœ€ä¼˜ï¼šdp[i] (ä»¥iç»“å°¾çš„æœ€å¤§å’Œ)
   - å…¨å±€æœ€ä¼˜ï¼šmax(dp[0], dp[1], ..., dp[n-1])

4. **åˆ†æ²»ç®—æ³•æ€æƒ³**:
   - ä¸‰åˆ†è¦†ç›–ï¼šå·¦åŠéƒ¨åˆ†ã€å³åŠéƒ¨åˆ†ã€è·¨è¶Šä¸­ç‚¹
   - é€’å½’å…³ç³»ï¼š`T(n) = 2T(n/2) + O(n)`ï¼Œæ—¶é—´å¤æ‚åº¦O(n log n)

#### å››ç§å®ç°æ–¹å¼

1) Kadaneç®—æ³• (æ¨è) - O(n)
```cpp
int maxSubArrayDP(vector<int>& nums) {
    int n = nums.size();
    if (n == 0) return 0;
    vector<int> dp(n);
    dp[0] = nums[0];
    int max_result = dp[0];
    for(int i = 1; i < n; i++) {
        dp[i] = max(nums[i], nums[i] + dp[i-1]);
        max_result = max(max_result, dp[i]);
    }
    return max_result;
}
```

2) ç©ºé—´ä¼˜åŒ–ç‰ˆæœ¬ - O(1)
```cpp
int maxSubArrayOptimized(vector<int>& nums) {
    int currentSum = nums[0];
    int maxSum = nums[0];
    for(int i = 1; i < nums.size(); i++) {
        currentSum = max(nums[i], currentSum + nums[i]);
        maxSum = max(currentSum, maxSum);
    }
    return maxSum;
}
```

3) åˆ†æ²»ç®—æ³• - O(n log n)
```cpp
int divideConquer(vector<int>& nums, int left, int right) {
    if(left == right) return nums[left];
    int mid = (left + right) / 2;
    int leftMax = divideConquer(nums, left, mid);
    int rightMax = divideConquer(nums, mid+1, right);
    
    // è®¡ç®—è·¨è¶Šä¸­ç‚¹çš„æœ€å¤§å­æ•°ç»„å’Œ
    int sumLeft = nums[mid], maxSumLeft = sumLeft;
    for(int i = mid-1; i >= left; i--) {
        sumLeft += nums[i];
        maxSumLeft = max(maxSumLeft, sumLeft);
    }
    
    int sumRight = nums[mid+1], maxSumRight = sumRight;
    for(int i = mid+2; i <= right; i++) {
        sumRight += nums[i];
        maxSumRight = max(maxSumRight, sumRight);
    }
    
    int crossSum = maxSumLeft + maxSumRight;
    return max({leftMax, rightMax, crossSum});
}
```

#### åˆ†æ²»ç®—æ³•æ·±åº¦ç†è§£
**ä¸‰åˆ†è¦†ç›–åŸç†**ï¼šä»»ä½•å­æ•°ç»„è¦ä¹ˆå®Œå…¨åœ¨å·¦åŠéƒ¨åˆ†ï¼Œè¦ä¹ˆå®Œå…¨åœ¨å³åŠéƒ¨åˆ†ï¼Œè¦ä¹ˆè·¨è¶Šä¸­ç‚¹
- **å·¦åŠéƒ¨åˆ†æœ€ä¼˜è§£**ï¼šé€’å½’æ±‚è§£`[left, mid]`
- **å³åŠéƒ¨åˆ†æœ€ä¼˜è§£**ï¼šé€’å½’æ±‚è§£`[mid+1, right]`  
- **è·¨è¶Šä¸­ç‚¹æœ€ä¼˜è§£**ï¼šä»midå‘å·¦æœ€å¤§å»¶ä¼¸ + ä»mid+1å‘å³æœ€å¤§å»¶ä¼¸

**å…³é”®æ´å¯Ÿ**ï¼šè·¨è¶Šä¸­ç‚¹çš„è®¡ç®—å®é™…ä¸Šè¦†ç›–äº†æ‰€æœ‰åŒ…å«midæˆ–mid+1çš„å­æ•°ç»„æƒ…å†µï¼

#### è¿ç»­å­æ•°ç»„DPç‰¹å¾
1. **çŠ¶æ€å®šä¹‰å¿…é¡»åŒ…å«"ä»¥iç»“å°¾"çš„çº¦æŸ**
2. **çŠ¶æ€è½¬ç§»ä½“ç°"ç»§ç»­vsé‡æ–°å¼€å§‹"çš„å†³ç­–**
3. **å…¨å±€æœ€ä¼˜éœ€è¦åœ¨æ‰€æœ‰å±€éƒ¨æœ€ä¼˜ä¸­é€‰æ‹©**
4. **ä¸å…¶ä»–DPçš„åŒºåˆ«**ï¼š
   - çˆ¬æ¥¼æ¢¯(70é¢˜)ï¼šé€’æ¨å…³ç³» `f(n) = f(n-1) + f(n-2)`
   - æ‰“å®¶åŠ«èˆ(198é¢˜)ï¼šå†³ç­–å…³ç³» `f(n) = max(é€‰æ‹©A, é€‰æ‹©B)`
   - æœ€å¤§å­æ•°ç»„(53é¢˜)ï¼šè¿ç»­çº¦æŸ `f(n) = max(ç»§ç»­, é‡æ–°å¼€å§‹)`

#### å¤æ‚åº¦åˆ†æ
- **Kadaneç®—æ³•**: æ—¶é—´O(n)ï¼Œç©ºé—´O(1) - æœ€ä¼˜è§£
- **åˆ†æ²»ç®—æ³•**: æ—¶é—´O(n log n)ï¼Œç©ºé—´O(log n) - é€’å½’æ ˆ
- **æš´åŠ›æšä¸¾**: æ—¶é—´O(nÂ²)ï¼Œç©ºé—´O(1) - è¶…æ—¶

#### æ˜“é”™ç‚¹
1. **å…¨å±€æœ€ä¼˜è§£**: éœ€è¦éå†æ‰€æœ‰dp[i]å–æœ€å¤§å€¼ï¼Œä¸æ˜¯dp[n-1]
2. **è¾¹ç•Œæ¡ä»¶**: å•ä¸ªå…ƒç´ æ—¶çš„å¤„ç†
3. **åˆ†æ²»è¾¹ç•Œ**: å¾ªç¯æ¡ä»¶åº”è¯¥ç”¨`>=`å’Œ`<=`åŒ…å«è¾¹ç•Œ

#### æ‰©å±•åº”ç”¨
- 152. ä¹˜ç§¯æœ€å¤§å­æ•°ç»„ (å¤„ç†è´Ÿæ•°ä¹˜ç§¯)
- 718. æœ€é•¿é‡å¤å­æ•°ç»„ (é•¿åº¦æœ€å¤§å€¼)
- 209. é•¿åº¦æœ€å°çš„å­æ•°ç»„ (æ»‘åŠ¨çª—å£å˜ç§)

#### å…³é”®ç†è§£
è¿ç»­å­æ•°ç»„DPçš„ç²¾é«“åœ¨äº**åœ¨ä¿æŒè¿ç»­æ€§çº¦æŸä¸‹åšæœ€ä¼˜å†³ç­–**ï¼šæ¯æ­¥éƒ½è¦é—®"æˆ‘æ˜¯ç»§ç»­ä¹‹å‰çš„ç´¯ç§¯ï¼Œè¿˜æ˜¯ä»å½“å‰ä½ç½®é‡æ–°å¼€å§‹ï¼Ÿ"

---

<a id="dp-322"></a>
### 322. é›¶é’±å…‘æ¢ (Medium) - å®Œå…¨èƒŒåŒ…
**çŠ¶æ€å®šä¹‰**: `dp[i]` = ç»„æˆé‡‘é¢içš„æœ€å°‘ç¡¬å¸æ•°
**è½¬ç§»æ–¹ç¨‹**: `dp[i] = min(dp[i-coin] + 1)`
**å…³é”®**: å®Œå…¨èƒŒåŒ…å…è®¸é‡å¤ä½¿ç”¨ï¼Œå†…å±‚å¾ªç¯å¯ç”¨å·²æ›´æ–°å€¼
**æ˜“é”™ç‚¹**: è®°å¿†åŒ–æœç´¢å¿…é¡»æ£€æŸ¥ `helpResult != -1`ï¼Œé˜²æ­¢å°†æ— è§£çŠ¶æ€ç´¯åŠ 
**è®°å¿†å£è¯€**: "æ— è§£ä¼ é€’æ¯å…¨å±€ï¼Œ-1æ£€æŸ¥æ˜¯å…³é”®"
```cpp
// âŒ é”™è¯¯ï¼šå¿˜è®°æ— è§£æ£€æŸ¥
int result = helper(amount - coin) + 1;

// âœ… æ­£ç¡®ï¼šæ£€æŸ¥æ— è§£çŠ¶æ€
int helpResult = helper(amount - coin);
if (helpResult != -1) {
    result = min(result, helpResult + 1);
}
```

### 322. é›¶é’±å…‘æ¢ (Medium)

#### æ ¸å¿ƒæ€æƒ³
å®Œå…¨èƒŒåŒ…åŠ¨æ€è§„åˆ’çš„ç»å…¸é¢˜ç›®ï¼Œæ¯ä¸ªç¡¬å¸å¯ä»¥ä½¿ç”¨æ— é™æ¬¡ï¼Œæ±‚ç»„æˆç›®æ ‡é‡‘é¢æ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°ã€‚

#### å…³é”®é€»è¾‘
1. **çŠ¶æ€å®šä¹‰**:
   - `dp[i]` = ç»„æˆé‡‘é¢iæ‰€éœ€çš„æœ€å°‘ç¡¬å¸æ•°
   
2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**:
   ```
   dp[i] = min(dp[i-coin] + 1) for all valid coins
   ```
   é€»è¾‘ï¼šå¯¹äºé‡‘é¢iï¼Œå°è¯•ä½¿ç”¨æ¯ç§ç¡¬å¸ï¼Œé€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆ

3. **è¾¹ç•Œæ¡ä»¶**:
   ```cpp
   dp[0] = 0                    // ç»„æˆé‡‘é¢0éœ€è¦0ä¸ªç¡¬å¸
   dp[i] = amount + 1           // åˆå§‹åŒ–ä¸ºä¸å¯èƒ½çš„å¤§å€¼
   ```

4. **æ— è§£åˆ¤æ–­**:
   ```cpp
   return dp[amount] > amount ? -1 : dp[amount];
   ```

#### å®Œå…¨èƒŒåŒ…vs01èƒŒåŒ…
- **01èƒŒåŒ…**: æ¯ä¸ªç‰©å“æœ€å¤šé€‰æ‹©ä¸€æ¬¡
- **å®Œå…¨èƒŒåŒ…**: æ¯ä¸ªç‰©å“å¯ä»¥é€‰æ‹©æ— é™æ¬¡
- **å…³é”®åŒºåˆ«**: å®Œå…¨èƒŒåŒ…åœ¨å†…å±‚å¾ªç¯ä¸­å¯ä»¥ä½¿ç”¨å·²æ›´æ–°çš„dpå€¼

#### å››ç§å®ç°æ–¹å¼

1) é€’å½’è§£æ³• (ä¼šè¶…æ—¶)
```cpp
int helper(vector<int>& coins, int amount) {
    if(amount == 0) return 0;
    if(amount < 0) return -1;
    
    int minCoins = INT_MAX;
    for(int coin : coins) {
        int subResult = helper(coins, amount - coin);
        if(subResult != -1) {
            minCoins = min(minCoins, subResult + 1);
        }
    }
    return minCoins == INT_MAX ? -1 : minCoins;
}
```
**é—®é¢˜**: æŒ‡æ•°çº§æ—¶é—´å¤æ‚åº¦O(S^n)ï¼Œå¤§é‡é‡å¤è®¡ç®—

2) è®°å¿†åŒ–æœç´¢ (è‡ªé¡¶å‘ä¸‹)
```cpp
int helperMemo(vector<int>& coins, int amount, vector<int>& memo) {
    if(amount == 0) return 0;
    if(amount < 0) return -1;
    if(memo[amount] != -2) return memo[amount];
    
    int minCoins = INT_MAX;
    for(int coin : coins) {
        int subResult = helperMemo(coins, amount - coin, memo);
        if(subResult != -1) {
            minCoins = min(minCoins, subResult + 1);
        }
    }
    memo[amount] = (minCoins == INT_MAX) ? -1 : minCoins;
    return memo[amount];
}
```

3) åŠ¨æ€è§„åˆ’ (è‡ªåº•å‘ä¸Š) â­ æ¨è
```cpp
int coinChangeDP(vector<int>& coins, int amount) {
    vector<int> dp(amount + 1, amount + 1);  // åˆå§‹åŒ–ä¸ºä¸å¯èƒ½çš„å¤§å€¼
    dp[0] = 0;  // è¾¹ç•Œæ¡ä»¶
    
    for(int i = 1; i <= amount; i++) {
        for(int coin : coins) {
            if(coin <= i) {
                dp[i] = min(dp[i], dp[i - coin] + 1);
            }
        }
    }
    
    return dp[amount] > amount ? -1 : dp[amount];
}
```

#### å…³é”®ç†è§£ç‚¹

##### ä¸ºä»€ä¹ˆåˆå§‹åŒ–ä¸ºamount + 1ï¼Ÿ
- **ç†è®ºä¸Šç•Œ**: ç»„æˆä»»æ„é‡‘é¢æœ€å¤šéœ€è¦amountä¸ªé¢é¢ä¸º1çš„ç¡¬å¸
- **é¿å…æº¢å‡º**: æ¯”ä½¿ç”¨INT_MAXæ›´å®‰å…¨
- **ä¾¿äºåˆ¤æ–­**: dp[amount] > amount è¯´æ˜æ— è§£

##### å¾ªç¯é¡ºåºä¸ºä»€ä¹ˆæ­£ç¡®ï¼Ÿ
```cpp
for(int i = 1; i <= amount; i++) {        // å¤–å±‚ï¼šé‡‘é¢
    for(int coin : coins) {               // å†…å±‚ï¼šç¡¬å¸
        if(coin <= i) {
            dp[i] = min(dp[i], dp[i - coin] + 1);
        }
    }
}
```
å®Œå…¨èƒŒåŒ…å…è®¸é‡å¤ä½¿ç”¨ï¼Œæ‰€ä»¥å†…å±‚å¾ªç¯ä½¿ç”¨å·²æ›´æ–°çš„dpå€¼æ˜¯æ­£ç¡®çš„ã€‚

#### æ˜“é”™ç‚¹è®°å½•

1) å¾ªç¯è¾¹ç•Œé”™è¯¯ âŒ
```cpp
for(int i = 1; i < amount; i++) {  // é”™è¯¯ï¼šåº”è¯¥æ˜¯ i <= amount
```
**åæœ**: æ— æ³•è®¡ç®—dp[amount]ï¼Œå¯¼è‡´è¿”å›é”™è¯¯ç»“æœ

2) ç¼–è¯‘é”™è¯¯
ä½¿ç”¨C++11ç‰¹æ€§ï¼ˆrange-based forå¾ªç¯ã€initializer listï¼‰éœ€è¦ç¼–è¯‘å™¨æ”¯æŒï¼š
```bash
g++ -std=c++11 -o problem_322 problem_322_template.cpp
```

#### å¤æ‚åº¦åˆ†æ
- **é€’å½’**: æ—¶é—´O(S^n)ï¼Œç©ºé—´O(S) - Sæ˜¯é‡‘é¢ï¼Œnæ˜¯ç¡¬å¸ç§ç±»æ•°
- **è®°å¿†åŒ–**: æ—¶é—´O(S Ã— n)ï¼Œç©ºé—´O(S)
- **åŠ¨æ€è§„åˆ’**: æ—¶é—´O(S Ã— n)ï¼Œç©ºé—´O(S) â­ æœ€ä¼˜è§£
- **BFS**: æ—¶é—´O(S Ã— n)ï¼Œç©ºé—´O(S)

#### æ‰©å±•åº”ç”¨
- 518. é›¶é’±å…‘æ¢II (ç»„åˆæ•°é—®é¢˜)
- 279. å®Œå…¨å¹³æ–¹æ•° (æœ€å°‘å¹³æ–¹æ•°)
- 377. ç»„åˆæ€»å’Œâ…£ (æ’åˆ—æ•°é—®é¢˜)

#### æµ‹è¯•ç»“æœ
æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡ï¼š
- coins=[1,2,5], amount=11 â†’ 3 (5+5+1)
- coins=[2], amount=3 â†’ -1 (æ— è§£)
- coins=[1], amount=0 â†’ 0 (è¾¹ç•Œæƒ…å†µ)
- coins=[1,3,4], amount=6 â†’ 2 (3+3)
- coins=[3,5], amount=1 â†’ -1 (æ— è§£)

#### å…³é”®æ´å¯Ÿ
å®Œå…¨èƒŒåŒ…DPçš„ç²¾é«“åœ¨äº**å»ºæ¨¡æ— é™é€‰æ‹©çš„æœ€ä¼˜åŒ–é—®é¢˜**ï¼šå°†"æ¯ä¸ªç‰©å“å¯ä»¥é€‰æ‹©æ— é™æ¬¡"è½¬åŒ–ä¸º"åœ¨çŠ¶æ€è½¬ç§»ä¸­å…è®¸é‡å¤ä½¿ç”¨å·²è®¡ç®—çš„ç»“æœ"ã€‚

---

<a id="dp-300"></a>
### 300. æœ€é•¿é€’å¢å­åºåˆ— (Medium) - åºåˆ—DP
**çŠ¶æ€å®šä¹‰**: `dp[i]` = ä»¥nums[i]ç»“å°¾çš„LISé•¿åº¦
**ä¼˜åŒ–**: è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾è¾¾åˆ°O(n log n)
**æ˜“é”™**: è¿”å›`max(dp)`è€Œé`dp[n-1]`

#### æ ¸å¿ƒæ€æƒ³
åºåˆ—åŠ¨æ€è§„åˆ’çš„ç»å…¸é¢˜ç›®ï¼ŒæŒæ¡ä»¥"ä½ç½®ç»“å°¾"çš„çŠ¶æ€å®šä¹‰æ€ç»´ï¼ŒåŒæ—¶å­¦ä¹ è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾çš„O(n log n)ä¼˜åŒ–ã€‚

#### å…³é”®é€»è¾‘
1. **çŠ¶æ€å®šä¹‰**:
   - `dp[i]` = ä»¥nums[i]ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦
   
2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**:
   ```
   dp[i] = max(dp[j] + 1) for all j < i and nums[j] < nums[i]
   ```
   é€»è¾‘ï¼šå¯¹äºæ¯ä¸ªä½ç½®iï¼Œæ£€æŸ¥æ‰€æœ‰å‰é¢æ›´å°çš„å…ƒç´ ï¼Œé€‰æ‹©æœ€ä¼˜è½¬ç§»

3. **è¾¹ç•Œæ¡ä»¶**:
   ```cpp
   dp[i] = 1  // æ¯ä¸ªå…ƒç´ è‡ªå·±æ„æˆé•¿åº¦ä¸º1çš„åºåˆ—
   ```

4. **æœ€ç»ˆç­”æ¡ˆ**:
   ```cpp
   return max(dp[i]) for all i  // éœ€è¦éå†æ‰€æœ‰ä½ç½®å–æœ€å¤§å€¼
   ```

#### ä¸‰ç§å®ç°æ–¹å¼

1) åŠ¨æ€è§„åˆ’ O(nÂ²) - ç»å…¸è§£æ³• â­
```cpp
int lengthOfLISDP(vector<int>& nums) {
    int n = nums.size();
    if (n == 0) return 0;
    
    vector<int> dp(n, 1);  // åˆå§‹åŒ–ä¸º1
    
    for(int i = 1; i < n; i++) {
        for(int j = 0; j < i; j++) {
            if (nums[i] > nums[j]) {
                dp[i] = max(dp[i], dp[j] + 1);
            }
        }
    }
    
    return *max_element(dp.begin(), dp.end());
}
```

2) è®°å¿†åŒ–æœç´¢ O(nÂ²) - è‡ªé¡¶å‘ä¸‹
```cpp
int lengthOfLISMemo(vector<int>& nums) {
    int n = nums.size();
    vector<int> memo(n, -1);
    int maxResult = 1;
    for(int i = 0; i < n; i++) {
        maxResult = max(maxResult, helper(nums, i, memo));
    }
    return maxResult;
}

int helper(vector<int>& nums, int i, vector<int>& memo) {
    if (memo[i] != -1) return memo[i];  // ç¼“å­˜å‘½ä¸­
    memo[i] = 1;  // åŸºç¡€æƒ…å†µ
    for(int j = 0; j < i; j++) {
        if (nums[j] < nums[i]) {
            memo[i] = max(memo[i], helper(nums, j, memo) + 1);
        }
    }
    return memo[i];
}
```

3) è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾ O(n log n) - æœ€ä¼˜è§£ â­â­
```cpp
int lengthOfLISBinary(vector<int>& nums) {
    vector<int> tails;
    for (int num : nums) {
        int pos = tails.size();
        int left = 0, right = tails.size() - 1;
        
        // äºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€ä¸ª >= num çš„ä½ç½®
        while(left <= right) {
            int mid = left + (right - left) / 2;
            if(tails[mid] >= num) {
                pos = mid;
                right = mid - 1;
            } else {
                left = mid + 1; 
            }
        }
        
        if(pos == tails.size()) {
            tails.push_back(num);  // æ·»åŠ åˆ°æœ«å°¾
        } else {
            tails[pos] = num;      // æ›¿æ¢
        }
    }
    return tails.size();
}
```

#### è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾æ·±åº¦ç†è§£

##### æ ¸å¿ƒæ€æƒ³
- **tails[i]** = é•¿åº¦ä¸ºi+1çš„é€’å¢å­åºåˆ—çš„æœ€å°å°¾å…ƒç´ 
- **ä¸ºä»€ä¹ˆè¦æœ€å°ï¼Ÿ** å°¾å…ƒç´ è¶Šå°ï¼Œåç»­æ·»åŠ æ–°å…ƒç´ çš„æœºä¼šè¶Šå¤§

##### ç®—æ³•æ­¥éª¤
1. å¯¹æ¯ä¸ªæ–°å…ƒç´ numï¼š
   - å¦‚æœnum > tailsä¸­æ‰€æœ‰å…ƒç´  â†’ ç›´æ¥æ·»åŠ åˆ°æœ«å°¾ï¼ˆå»¶é•¿åºåˆ—ï¼‰
   - å¦åˆ™ â†’ äºŒåˆ†æŸ¥æ‰¾ç¬¬ä¸€ä¸ªâ‰¥numçš„ä½ç½®å¹¶æ›¿æ¢ï¼ˆä¿æŒæœ€å°å°¾å…ƒç´ ï¼‰

##### å…³é”®æ´å¯Ÿ
- **tailsæ•°ç»„å§‹ç»ˆä¿æŒä¸¥æ ¼é€’å¢**
- **tailsé•¿åº¦ = æœ€é•¿é€’å¢å­åºåˆ—é•¿åº¦**
- **tailså†…å®¹ä¸ä¸€å®šæ˜¯çœŸå®çš„LISï¼Œä½†é•¿åº¦ä¿è¯æ­£ç¡®**

#### æ˜“é”™ç‚¹è®°å½•

1) DPçŠ¶æ€è½¬ç§»é”™è¯¯ âŒ
```cpp
dp[i] = max(dp[j] + 1);  // é”™è¯¯ï¼šç¼ºå°‘dp[i]å‚æ•°
```
æ­£ç¡®ï¼š
```cpp
dp[i] = max(dp[i], dp[j] + 1);  // éœ€è¦æ¯”è¾ƒå½“å‰å€¼å’Œæ–°å€¼
```

2) äºŒåˆ†æŸ¥æ‰¾è¯­æ³•é”™è¯¯ âŒ
```cpp
int left = 0; right = tails.size() - 1;  // é”™è¯¯ï¼šç¼ºå°‘ç±»å‹å£°æ˜
```
æ­£ç¡®ï¼š
```cpp
int left = 0, right = tails.size() - 1;  // é€—å·åˆ†éš”ï¼Œç»Ÿä¸€å£°æ˜
```

3) äºŒåˆ†æŸ¥æ‰¾midè®¡ç®—ä½ç½®é”™è¯¯ âŒ
```cpp
int mid = (left + right) / 2;  // æ”¾åœ¨whileå¤–é¢
while(left <= right) {
    // ä½¿ç”¨è¿‡æ—¶çš„midå€¼
}
```
æ­£ç¡®ï¼š
```cpp
while(left <= right) {
    int mid = left + (right - left) / 2;  // æ¯æ¬¡å¾ªç¯é‡æ–°è®¡ç®—
}
```

4) è®°å¿†åŒ–æœç´¢è¯­æ³•é”™è¯¯ âŒ
```cpp
if memo[i] != -1 return memo[i];  // ç¼ºå°‘æ‹¬å·
for(int j=0; j<i; i++) {          // å¾ªç¯å˜é‡é”™è¯¯
```
æ­£ç¡®ï¼š
```cpp
if (memo[i] != -1) return memo[i];  // åŠ æ‹¬å·
for(int j=0; j<i; j++) {            // j++è€Œä¸æ˜¯i++
```

5) åˆå§‹åŒ–çš„é‡è¦æ€§
```cpp
int pos = tails.size();  // ğŸ”‘ å…³é”®ï¼šåˆå§‹åŒ–ä¸º"æœªæ‰¾åˆ°"æ ‡å¿—
```
è¿™ä¸ªåˆå§‹åŒ–ç¡®ä¿äº†å½“æ²¡æ‰¾åˆ°â‰¥numçš„å…ƒç´ æ—¶ï¼Œposä¿æŒä¸ºtails.size()ï¼Œä»è€Œæ­£ç¡®æ‰§è¡Œpush_backæ“ä½œã€‚

#### åºåˆ—DPç‰¹å¾æ€»ç»“
1. **çŠ¶æ€å®šä¹‰å¿…é¡»åŒ…å«"ä»¥ç¬¬iä¸ªå…ƒç´ ç»“å°¾"**
2. **éœ€è¦æ£€æŸ¥å‰é¢æ‰€æœ‰å¯èƒ½çš„è½¬ç§»çŠ¶æ€**
3. **æœ€ç»ˆç­”æ¡ˆéœ€è¦éå†æ‰€æœ‰çŠ¶æ€å–æœ€ä¼˜å€¼**
4. **ä¸å…¶ä»–DPç±»å‹çš„åŒºåˆ«**ï¼š
   - çˆ¬æ¥¼æ¢¯ï¼šé€’æ¨å…³ç³»
   - æ‰“å®¶åŠ«èˆï¼šå†³ç­–å…³ç³»  
   - æœ€å¤§å­æ•°ç»„ï¼šè¿ç»­çº¦æŸ
   - é›¶é’±å…‘æ¢ï¼šå®Œå…¨èƒŒåŒ…
   - **æœ€é•¿é€’å¢å­åºåˆ—ï¼šåºåˆ—å…³ç³»**

#### å¤æ‚åº¦åˆ†æ
- **DPè§£æ³•**: æ—¶é—´O(nÂ²)ï¼Œç©ºé—´O(n)
- **è®°å¿†åŒ–**: æ—¶é—´O(nÂ²)ï¼Œç©ºé—´O(n) + é€’å½’æ ˆ
- **è´ªå¿ƒ+äºŒåˆ†**: æ—¶é—´O(n log n)ï¼Œç©ºé—´O(n) â­ æœ€ä¼˜è§£

#### æ‰©å±•åº”ç”¨
- 354. ä¿„ç½—æ–¯å¥—å¨ƒä¿¡å°é—®é¢˜ (äºŒç»´LIS)
- 673. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•° (è®¡æ•°é—®é¢˜)
- 1143. æœ€é•¿å…¬å…±å­åºåˆ— (åŒåºåˆ—DP)
- 368. æœ€å¤§æ•´é™¤å­é›† (ç‰¹æ®Šçº¦æŸçš„LIS)

#### æµ‹è¯•ç»“æœ
æ‰€æœ‰ä¸‰ç§å®ç°å‡é€šè¿‡å…¨éƒ¨æµ‹è¯•ç”¨ä¾‹ï¼š
- [10,9,2,5,3,7,101,18] â†’ 4
- [0,1,0,3,2,3] â†’ 4  
- [7,7,7,7,7,7,7] â†’ 1
- [1,3,6,7,9,4,10,5,6] â†’ 6
- [10] â†’ 1

#### å…³é”®æ´å¯Ÿ
åºåˆ—DPçš„ç²¾é«“åœ¨äº**æ­£ç¡®å»ºæ¨¡"ä»¥æŸä½ç½®ç»“å°¾"çš„çŠ¶æ€**ï¼Œé€šè¿‡æ£€æŸ¥æ‰€æœ‰å‰é©±çŠ¶æ€æ¥æ„å»ºæœ€ä¼˜è§£ã€‚è´ªå¿ƒ+äºŒåˆ†çš„ä¼˜åŒ–ä½“ç°äº†**ç»´æŠ¤å…³é”®ä¿¡æ¯è€Œéå®Œæ•´çŠ¶æ€**çš„ç®—æ³•è®¾è®¡æ€æƒ³ã€‚

---

<a id="dp-1143"></a>
### 1143. æœ€é•¿å…¬å…±å­åºåˆ— (Medium) - åŒåºåˆ—DP
**çŠ¶æ€å®šä¹‰**: `dp[i][j]` = ä¸¤åºåˆ—å‰ç¼€LCSé•¿åº¦
**è½¬ç§»**: åŒ¹é…æ—¶`dp[i-1][j-1]+1`ï¼Œä¸åŒ¹é…æ—¶å–æœ€ä¼˜
**ä¼˜åŒ–**: æ»šåŠ¨æ•°ç»„é™ä½ç©ºé—´å¤æ‚åº¦

#### æ ¸å¿ƒæ€æƒ³
åŒåºåˆ—åŠ¨æ€è§„åˆ’çš„ç»å…¸é¢˜ç›®ï¼Œç”¨äºŒç»´DPè¡¨è¡¨ç¤ºä¸¤ä¸ªåºåˆ—çš„åŒ¹é…å…³ç³»ï¼ŒæŒæ¡å­—ç¬¦åŒ¹é…/ä¸åŒ¹é…çš„çŠ¶æ€è½¬ç§»ã€‚

#### å…³é”®é€»è¾‘
1. **çŠ¶æ€å®šä¹‰**:
   - `dp[i][j]` = text1å‰iä¸ªå­—ç¬¦å’Œtext2å‰jä¸ªå­—ç¬¦çš„æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦
   
2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**:
   ```cpp
   if (text1[i-1] == text2[j-1]):
       dp[i][j] = dp[i-1][j-1] + 1      // å­—ç¬¦åŒ¹é…ï¼šå·¦ä¸Šè§’+1
   else:
       dp[i][j] = max(dp[i-1][j],       // ä¸Šè¾¹ï¼šä¸ä½¿ç”¨text1[i-1]
                      dp[i][j-1])       // å·¦è¾¹ï¼šä¸ä½¿ç”¨text2[j-1]
   ```

3. **è¾¹ç•Œæ¡ä»¶**:
   ```cpp
   dp[0][j] = 0  // ç©ºå­—ç¬¦ä¸²ä¸ä»»ä½•å­—ç¬¦ä¸²çš„LCSä¸º0
   dp[i][0] = 0  // ä»»ä½•å­—ç¬¦ä¸²ä¸ç©ºå­—ç¬¦ä¸²çš„LCSä¸º0
   ```

4. **å“¨å…µæŠ€å·§**:
   - åˆ›å»º`(m+1) x (n+1)`çš„DPè¡¨ï¼Œå¤šå‡ºçš„ä¸€è¡Œä¸€åˆ—ä½œä¸ºè¾¹ç•Œå¤„ç†
   - é¿å…ç‰¹æ®Šåˆ¤æ–­ï¼Œç®€åŒ–ä»£ç é€»è¾‘

#### ä¸‰ç§å®ç°æ–¹å¼

1) äºŒç»´åŠ¨æ€è§„åˆ’ O(mn) - ç»å…¸è§£æ³• â­
```cpp
int longestCommonSubsequenceDP(string text1, string text2) {
    int m = text1.length(), n = text2.length();
    
    // å“¨å…µæŠ€å·§ï¼šå¤šä¸€è¡Œä¸€åˆ—å¤„ç†è¾¹ç•Œ
    vector<vector<int>> dp(m + 1, vector<int>(n + 1, 0));
    
    for(int i = 0; i < m; i++) {
        for(int j = 0; j < n; j++) {
            if(text1[i] == text2[j]) {
                dp[i+1][j+1] = dp[i][j] + 1;        // å·¦ä¸Šè§’+1
            } else {
                dp[i+1][j+1] = max(dp[i+1][j],      // å·¦è¾¹
                                   dp[i][j+1]);     // ä¸Šè¾¹
            }
        }
    }
    
    return dp[m][n];
}
```

2) è®°å¿†åŒ–æœç´¢ O(mn) - è‡ªé¡¶å‘ä¸‹
```cpp
int longestCommonSubsequenceMemo(string text1, string text2) {
    int m = text1.length(), n = text2.length();
    vector<vector<int>> memo(m + 1, vector<int>(n + 1, -1));
    return helper(text1, text2, m, n, memo);
}

int helper(string& text1, string& text2, int i, int j, vector<vector<int>>& memo) {
    if(i == 0 || j == 0) return 0;  // è¾¹ç•Œæ¡ä»¶
    if(memo[i][j] != -1) return memo[i][j];  // ç¼“å­˜å‘½ä¸­
    
    int result;
    if(text1[i-1] == text2[j-1]) {
        result = helper(text1, text2, i-1, j-1, memo) + 1;
    } else {
        result = max(helper(text1, text2, i, j-1, memo),
                    helper(text1, text2, i-1, j, memo));
    }
    
    memo[i][j] = result;  // ç¼“å­˜ç»“æœ
    return result;
}
```

3) ç©ºé—´ä¼˜åŒ– O(min(m,n)) - æ»šåŠ¨æ•°ç»„ â­â­
```cpp
int longestCommonSubsequenceOptimized(string text1, string text2) {
    int m = text1.size(), n = text2.size();
    if(m == 0 || n == 0) return 0;

    // ä¸¤è¡Œæ»šåŠ¨æ•°ç»„
    vector<int> pre(n + 1, 0);   // ä¸Šä¸€è¡Œ
    vector<int> curr(n + 1, 0);  // å½“å‰è¡Œ

    for(int i = 0; i < m; i++) {
        curr[0] = 0;  // è¾¹ç•Œæ¡ä»¶
        for(int j = 0; j < n; j++) {
            if(text1[i] == text2[j]) {
                curr[j+1] = pre[j] + 1;         // å·¦ä¸Šè§’+1
            } else {
                curr[j+1] = max(pre[j+1],       // ä¸Šè¾¹
                               curr[j]);        // å·¦è¾¹
            }
        }
        swap(pre, curr);  // æ»šåŠ¨ï¼šé«˜æ•ˆäº¤æ¢
    }
    
    return pre[n];  // æœ€ç»ˆç»“æœåœ¨pre[n]
}
```

#### æ»šåŠ¨æ•°ç»„æ·±åº¦ç†è§£

##### æ ¸å¿ƒæ€æƒ³
- **è§‚å¯Ÿä¾èµ–å…³ç³»**ï¼š`dp[i][j]` åªä¾èµ–äº `dp[i-1][j-1]`ã€`dp[i-1][j]`ã€`dp[i][j-1]`
- **ç©ºé—´ä¼˜åŒ–ç­–ç•¥**ï¼šåªä¿å­˜ä¸Šä¸€è¡Œå’Œå½“å‰è¡Œï¼Œä¸éœ€è¦æ•´ä¸ªäºŒç»´è¡¨
- **æ»šåŠ¨æœºåˆ¶**ï¼šè®¡ç®—å®Œå½“å‰è¡Œåï¼Œé€šè¿‡swapè®©å½“å‰è¡Œå˜æˆä¸‹ä¸€è½®çš„"ä¸Šä¸€è¡Œ"

##### æ•°ç»„å¯¹åº”å…³ç³»
| äºŒç»´DP | æ»šåŠ¨æ•°ç»„ | è¯´æ˜ |
|--------|----------|------|
| `dp[i-1][j-1]` | `pre[j]` | å·¦ä¸Šè§’ï¼šä¸Šä¸€è¡Œçš„jä½ç½® |
| `dp[i-1][j]` | `pre[j+1]` | ä¸Šè¾¹ï¼šä¸Šä¸€è¡Œçš„j+1ä½ç½® |
| `dp[i][j-1]` | `curr[j]` | å·¦è¾¹ï¼šå½“å‰è¡Œçš„jä½ç½® |
| `dp[i][j]` | `curr[j+1]` | å½“å‰ä½ç½®ï¼šå½“å‰è¡Œçš„j+1ä½ç½® |

##### ä¸ºä»€ä¹ˆè¿”å›pre[n]ï¼Ÿ
```cpp
// æœ€åä¸€è½®å¾ªç¯ç»“æŸæ—¶
curr = [æœ€åä¸€è¡Œçš„è®¡ç®—ç»“æœ]
swap(pre, curr);  // äº¤æ¢å
pre = [æœ€åä¸€è¡Œçš„ç»“æœ] â† æœ€ç»ˆç­”æ¡ˆåœ¨è¿™é‡Œ
```

#### åŒåºåˆ—DPç‰¹å¾æ€»ç»“
1. **äºŒç»´çŠ¶æ€ç©ºé—´**ï¼šéœ€è¦è€ƒè™‘ä¸¤ä¸ªåºåˆ—çš„åŒ¹é…å…³ç³»
2. **åŒ¹é…å†³ç­–**ï¼šå­—ç¬¦åŒ¹é…æ—¶å»¶ç»­å­é—®é¢˜ï¼Œä¸åŒ¹é…æ—¶é€‰æ‹©æœ€ä¼˜æ–¹æ¡ˆ
3. **è¾¹ç•Œå¤„ç†**ï¼šç©ºåºåˆ—ä½œä¸ºè¾¹ç•Œæ¡ä»¶ï¼Œé€šå¸¸ç»“æœä¸º0
4. **ç©ºé—´ä¼˜åŒ–**ï¼šå¯ä»¥ç”¨æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œä½†ä¸èƒ½æ„é€ å…·ä½“åºåˆ—
5. **æ—¶é—´å¤æ‚åº¦**ï¼šé€šå¸¸ä¸ºO(mn)ï¼Œéš¾ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–

#### ä¸LISå¯¹æ¯”åˆ†æ
| ç‰¹å¾ | LIS (300é¢˜) | LCS (1143é¢˜) |
|------|-------------|--------------|
| åºåˆ—æ•°é‡ | å•åºåˆ— | åŒåºåˆ— |
| çŠ¶æ€å®šä¹‰ | `dp[i]` = ä»¥iç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ— | `dp[i][j]` = ä¸¤åºåˆ—å‰ç¼€çš„LCS |
| çŠ¶æ€è½¬ç§» | æ£€æŸ¥æ‰€æœ‰å‰é©±ï¼Œé€‰æ‹©æœ€ä¼˜ | è€ƒè™‘åŒ¹é…/ä¸åŒ¹é…ï¼Œé€‰æ‹©æœ€ä¼˜ |
| å¤æ‚åº¦ | O(nÂ²) â†’ O(n log n) | O(mn) â†’ O(min(m,n)) |
| ä¼˜åŒ–æ–¹å¼ | è´ªå¿ƒ+äºŒåˆ†æŸ¥æ‰¾ | æ»šåŠ¨æ•°ç»„ |

#### æ˜“é”™ç‚¹è®°å½•

1) è®°å¿†åŒ–æœç´¢å­—ç¬¦æ¯”è¾ƒé”™è¯¯ âŒ
```cpp
if(text1[i] == text2[j]) {  // é”™è¯¯ï¼šå‚æ•°i,jè¡¨ç¤ºé•¿åº¦
```
æ­£ç¡®ï¼š
```cpp
if(text1[i-1] == text2[j-1]) {  // å­—ç¬¦ä¸‹æ ‡è¦å‡1
```

2) æ»šåŠ¨æ•°ç»„çŠ¶æ€è½¬ç§»é”™è¯¯ âŒ
```cpp
curr[j+1] = curr[j] + 1;  // é”™è¯¯ï¼šåº”è¯¥æ˜¯å·¦ä¸Šè§’+1
```
æ­£ç¡®ï¼š
```cpp
curr[j+1] = pre[j] + 1;  // å·¦ä¸Šè§’+1
```

#### å¤æ‚åº¦åˆ†æ
- **äºŒç»´DP**: æ—¶é—´O(mn)ï¼Œç©ºé—´O(mn)
- **è®°å¿†åŒ–**: æ—¶é—´O(mn)ï¼Œç©ºé—´O(mn) + é€’å½’æ ˆ
- **æ»šåŠ¨æ•°ç»„**: æ—¶é—´O(mn)ï¼Œç©ºé—´O(min(m,n)) â­ æœ€ä¼˜ç©ºé—´

#### æ‰©å±•åº”ç”¨
- 72. ç¼–è¾‘è·ç¦» (æ’å…¥ã€åˆ é™¤ã€æ›¿æ¢æ“ä½œ)
- 97. äº¤é”™å­—ç¬¦ä¸² (è·¯å¾„åŒ¹é…é—®é¢˜)
- 115. ä¸åŒçš„å­åºåˆ— (è®¡æ•°DP)
- 516. æœ€é•¿å›æ–‡å­åºåˆ— (LCSå˜ç§)

#### æµ‹è¯•ç»“æœ
æ‰€æœ‰å®ç°å‡é€šè¿‡å…¨éƒ¨æµ‹è¯•ç”¨ä¾‹ï¼š
- "abcde" vs "ace" â†’ 3 (LCS: "ace")
- "abc" vs "abc" â†’ 3 (å®Œå…¨ç›¸åŒ)
- "abc" vs "def" â†’ 0 (æ— å…¬å…±å­—ç¬¦)
- "abcdgh" vs "aedfhr" â†’ 3 (LCS: "adh")
- "a" vs "a" â†’ 1 (å•å­—ç¬¦åŒ¹é…)

#### å…³é”®æ´å¯Ÿ
åŒåºåˆ—DPçš„ç²¾é«“åœ¨äº**å»ºæ¨¡ä¸¤ä¸ªåºåˆ—çš„åŒ¹é…å…³ç³»**ï¼Œé€šè¿‡äºŒç»´çŠ¶æ€ç©ºé—´è€ƒè™‘æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ç»„åˆã€‚æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ä½“ç°äº†**æœ€å°åŒ–çŠ¶æ€å­˜å‚¨**çš„ç©ºé—´ä¼˜åŒ–æ€æƒ³ã€‚

---

<a id="dp-516"></a>
### 516. æœ€é•¿å›æ–‡å­åºåˆ— (Medium) - åŒºé—´DP
**çŠ¶æ€å®šä¹‰**: `dp[i][j]` = s[i..j]çš„å›æ–‡å­åºåˆ—é•¿åº¦
**å…³é”®**: æŒ‰åŒºé—´é•¿åº¦é€’å¢éå†
**è½¬ç§»**: ä¸¤ç«¯åŒ¹é…+2ï¼Œä¸åŒ¹é…é€‰æ‹©æœ€ä¼˜å­åŒºé—´

#### æ ¸å¿ƒæ€æƒ³
åŒºé—´åŠ¨æ€è§„åˆ’çš„ç»å…¸é¢˜ç›®ï¼ŒæŒæ¡"æ»‘åŠ¨çª—å£å¼"çš„åŒºé—´éå†æ€ç»´ï¼Œç†è§£å¤§åŒºé—´ä¾èµ–å°åŒºé—´çš„çŠ¶æ€è½¬ç§»ã€‚

#### å…³é”®é€»è¾‘
1. **çŠ¶æ€å®šä¹‰**:
   - `dp[i][j]` = å­—ç¬¦ä¸²s[i..j]èŒƒå›´å†…çš„æœ€é•¿å›æ–‡å­åºåˆ—é•¿åº¦
   
2. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**:
   ```cpp
   if (s[i] == s[j]):
       dp[i][j] = dp[i+1][j-1] + 2    // ä¸¤ç«¯åŒ¹é…ï¼Œé•¿åº¦+2
   else:
       dp[i][j] = max(dp[i+1][j], dp[i][j-1])  // é€‰æ‹©æ›´ä¼˜çš„å­åŒºé—´
   ```

3. **è¾¹ç•Œæ¡ä»¶**:
   ```cpp
   dp[i][i] = 1  // å•ä¸ªå­—ç¬¦çš„å›æ–‡é•¿åº¦ä¸º1
   ```

4. **éå†é¡ºåº**: æŒ‰åŒºé—´é•¿åº¦ä»å°åˆ°å¤§ï¼ˆå…³é”®ï¼ï¼‰
   ```cpp
   for(int len = 2; len <= n; len++) {        // åŒºé—´é•¿åº¦
       for(int i = 0; i <= n - len; i++) {    // å·¦ç«¯ç‚¹
           int j = i + len - 1;               // å³ç«¯ç‚¹
           // çŠ¶æ€è½¬ç§»...
       }
   }
   ```

#### æ ¸å¿ƒæ´å¯Ÿ

##### åŒºé—´DPçš„"æ»‘åŠ¨çª—å£"æ€ç»´
- **å¤–å±‚å¾ªç¯**: å›ºå®šçª—å£å¤§å°(len = 2, 3, 4, ...)
- **å†…å±‚å¾ªç¯**: å°†å›ºå®šå¤§å°çš„çª—å£åœ¨å­—ç¬¦ä¸²ä¸Šæ»‘åŠ¨
- **ä¾èµ–å…³ç³»**: å¤§çª—å£çš„è®¡ç®—ä¾èµ–å°çª—å£çš„ç»“æœ

##### ä¸LCSçš„å·§å¦™è”ç³»
- **è½¬åŒ–æ€æƒ³**: sçš„æœ€é•¿å›æ–‡å­åºåˆ— = sä¸reverse(s)çš„æœ€é•¿å…¬å…±å­åºåˆ—
- **åŸç†**: å›æ–‡åºåˆ—åœ¨åŸä¸²å’Œåè½¬ä¸²ä¸­éƒ½å­˜åœ¨
- **ä¼˜åŠ¿**: å¯ä»¥ç›´æ¥å¤ç”¨LCSä»£ç 

#### ä¸‰ç§å®ç°æ–¹å¼

1) åŒºé—´DP - O(nÂ²) â­ æ¨è
```cpp
int longestPalindromeSubseqDP(string s) {
    int n = s.length();
    vector<vector<int>> dp(n, vector<int>(n, 0));
    
    // åˆå§‹åŒ–ï¼šå•ä¸ªå­—ç¬¦
    for(int i = 0; i < n; i++) {
        dp[i][i] = 1;
    }
    
    // æŒ‰åŒºé—´é•¿åº¦å¡«å……
    for(int len = 2; len <= n; len++) {
        for(int i = 0; i <= n - len; i++) {
            int j = i + len - 1;
            if(s[i] == s[j]) {
                dp[i][j] = dp[i+1][j-1] + 2;
            } else {
                dp[i][j] = max(dp[i+1][j], dp[i][j-1]);
            }
        }
    }
    return dp[0][n-1];
}
```

2) è®°å¿†åŒ–æœç´¢ - O(nÂ²)
```cpp
int helper(string& s, int i, int j, vector<vector<int>>& memo) {
    if(i > j) return 0;
    if(i == j) return 1;
    if(memo[i][j] != -1) return memo[i][j];
    
    if(s[i] == s[j]) {
        memo[i][j] = helper(s, i+1, j-1, memo) + 2;
    } else {
        memo[i][j] = max(helper(s, i+1, j, memo), helper(s, i, j-1, memo));
    }
    return memo[i][j];
}
```

3) LCSè½¬åŒ– - O(nÂ²)
```cpp
int longestPalindromeSubseqLCS(string s) {
    string rev_s = s;
    reverse(rev_s.begin(), rev_s.end());
    return longestCommonSubsequence(s, rev_s);
}
```

#### å¤æ‚åº¦åˆ†æ
- **æ—¶é—´å¤æ‚åº¦**: O(nÂ²) - åŒé‡å¾ªç¯å¡«å……DPè¡¨
- **ç©ºé—´å¤æ‚åº¦**: O(nÂ²) - äºŒç»´DPè¡¨
- **ä¼˜åŒ–å¯èƒ½**: æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ç©ºé—´ï¼Œä½†å®ç°å¤æ‚

#### æ˜“é”™ç‚¹
1. **éå†é¡ºåºé”™è¯¯**: å¿…é¡»æŒ‰åŒºé—´é•¿åº¦é€’å¢ï¼Œä¸èƒ½æŒ‰åæ ‡éå†
2. **è¾¹ç•Œæ¡ä»¶**: `len <= n` ä¸æ˜¯ `len < n`
3. **å¾ªç¯è¾¹ç•Œ**: `i <= n - len` ä¿è¯jä¸è¶Šç•Œ
4. **å…¬å¼é”™è¯¯**: `j = i + len - 1` ä¸æ˜¯å…¶ä»–å…¬å¼

#### ä¸å…¶ä»–DPç±»å‹å¯¹æ¯”
| DPç±»å‹ | çŠ¶æ€å®šä¹‰ | éå†é¡ºåº | è½¬ç§»ç‰¹ç‚¹ |
|--------|----------|----------|----------|
| åºåˆ—DP | ä»¥ä½ç½®ç»“å°¾ | ä»å‰å¾€å | æ£€æŸ¥æ‰€æœ‰å‰é©± |
| åŒåºåˆ—DP | ä¸¤åºåˆ—å‰ç¼€ | åŒé‡é€’å¢ | åŒ¹é…/ä¸åŒ¹é… |
| **åŒºé—´DP** | åŒºé—´èŒƒå›´ | æŒ‰é•¿åº¦é€’å¢ | ç«¯ç‚¹å¤„ç† |

#### æ‰©å±•åº”ç”¨
- 5. æœ€é•¿å›æ–‡å­ä¸² (è¿ç»­æ€§çº¦æŸ)
- 312. æˆ³æ°”çƒ (ä¹˜ç§¯æœ€å¤§åŒ–)
- 1039. å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†çš„æœ€ä½å¾—åˆ†
- 87. æ‰°ä¹±å­—ç¬¦ä¸²

#### æµ‹è¯•ç»“æœ
æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹é€šè¿‡ï¼š
- "bbbab" â†’ 4 (LPS: "bbbb")
- "cbbd" â†’ 2 (LPS: "bb")
- "a" â†’ 1 (å•å­—ç¬¦)
- "abcba" â†’ 5 (æ•´ä¸ªä¸²å°±æ˜¯å›æ–‡)
- "aabaa" â†’ 5 (æ•´ä¸ªä¸²å°±æ˜¯å›æ–‡)

#### å…³é”®æ´å¯Ÿ
åŒºé—´DPçš„ç²¾é«“åœ¨äº**æŒ‰åŒºé—´é•¿åº¦é€’å¢çš„éå†ç­–ç•¥**ï¼Œç¡®ä¿è®¡ç®—å¤§åŒºé—´æ—¶æ‰€éœ€çš„å°åŒºé—´å·²ç»è®¡ç®—å®Œæ¯•ã€‚"æ»‘åŠ¨çª—å£"çš„æ€ç»´æ¨¡å¼å¸®åŠ©ç†è§£è¿™ç§éå†é¡ºåºçš„å¿…è¦æ€§ã€‚
