# 贪心算法专题

## 📚 专题概览

**核心思想**: 在每一步选择中都采取当前状态下最优的选择，从而希望得到全局最优解。

**适用场景**:
- 活动选择问题
- 区间调度问题  
- 最优装载问题
- 哈夫曼编码
- 最小生成树算法

**设计原理**:
1. **贪心选择性质**: 全局最优解可以通过局部最优选择得到
2. **最优子结构**: 问题的最优解包含子问题的最优解
3. **无后效性**: 前面的选择不会影响后面的选择

**时间复杂度**: 通常为O(n log n)（由于排序）或O(n)
**空间复杂度**: 通常为O(1)

---

## 🎯 核心算法模式

### 1. 区间调度类问题

**标准流程**:
1. **排序**: 按某个关键属性排序（通常是结束时间、起始时间等）
2. **贪心选择**: 遍历排序后的序列，做局部最优选择
3. **更新状态**: 根据选择更新全局状态

**通用模板**:
```cpp
// 区间调度贪心模板
vector<Interval> intervals = /* 输入区间 */;
sort(intervals.begin(), intervals.end(), comparator); // 关键：排序策略

vector<Interval> result;
for (auto& interval : intervals) {
    if (canSelect(interval, result)) { // 贪心条件判断
        result.push_back(interval);    // 局部最优选择
        updateState(interval);         // 更新全局状态
    }
}
return result;
```

### 2. 最值优化类问题

**核心思路**: 通过局部最优选择累积得到全局最优
**常见形式**: 装载问题、找零钱问题、任务分配等

---

## 📋 重点题目解析

### 🏆 [56] 合并区间 - 贪心经典入门

**问题类型**: 区间合并
**贪心策略**: 排序后顺序合并重叠区间

#### 算法分析

**核心思路**:
1. **排序**: 按区间起始点排序，建立处理顺序
2. **贪心选择**: 当前区间与前一个区间重叠则合并，否则开始新区间
3. **最优性**: 排序后的顺序处理保证了合并的最优性

**代码实现**:
```cpp
vector<vector<int>> merge(vector<vector<int>>& intervals) {
    if (intervals.empty()) return {};
    
    // 步骤1: 排序 - 贪心算法的前提
    sort(intervals.begin(), intervals.end(), [](const vector<int>& a, const vector<int>& b) {
        return a[0] < b[0]; // 按起始点升序排列
    });
    
    vector<vector<int>> merged;
    merged.push_back(intervals[0]);
    
    // 步骤2: 贪心合并
    for (int i = 1; i < intervals.size(); i++) {
        if (intervals[i][0] <= merged.back()[1]) {
            // 贪心选择：合并重叠区间
            merged.back()[1] = max(merged.back()[1], intervals[i][1]);
        } else {
            // 贪心选择：开始新区间
            merged.push_back(intervals[i]);
        }
    }
    
    return merged;
}
```

#### 贪心性质证明

**贪心选择性质**: 
- 对于按起始点排序的区间序列，如果当前区间与前一个合并后的区间重叠，则合并是最优选择
- 如果不重叠，则必须开始新的合并区间

**最优子结构**:
- 合并前i个区间的最优解 + 第i+1个区间的最优处理 = 合并前i+1个区间的最优解

#### 技术要点

**关键技术点**:
1. **排序策略**: 按起始点排序是算法正确性的基础
2. **重叠判断**: `intervals[i][0] <= merged.back()[1]`
3. **合并策略**: 更新右边界为两个区间右边界的最大值
4. **边界处理**: 空数组检查，防止访问越界

**时间复杂度**: O(n log n) - 主要是排序的开销
**空间复杂度**: O(1) - 不考虑返回数组的空间

#### 常见变形

- **插入区间**: 在已排序的区间列表中插入新区间
- **无重叠区间**: 计算需要移除多少区间使得无重叠
- **区间列表的交集**: 求两个区间列表的交集

---

## 🚨 贪心算法设计要点

### 1. 贪心选择的正确性

**验证方法**:
1. **反证法**: 假设贪心选择不是最优的，推导矛盾
2. **交换论证**: 证明任何最优解都可以通过交换得到贪心解
3. **数学归纳**: 证明每一步贪心选择都保持最优性

### 2. 排序策略的选择

**常见排序策略**:
- **按结束时间排序**: 活动选择问题
- **按起始时间排序**: 区间合并问题  
- **按比值排序**: 分数背包问题
- **按长度排序**: 某些字符串问题

**选择原则**: 排序后能够明确贪心选择的优先级

### 3. 状态维护

**关键要素**:
- **当前状态**: 记录当前的选择结果
- **约束条件**: 维护问题的约束不被违反
- **最优性指标**: 跟踪优化目标的当前值

---

## 🎨 贪心算法分类

### 1. 调度类问题

**特征**: 时间或资源的最优分配
**经典题目**: 
- 活动选择问题
- 会议室安排
- 任务调度

**贪心策略**: 通常按结束时间、开始时间或持续时间排序

### 2. 构造类问题

**特征**: 构造满足条件的最优序列或结构
**经典题目**:
- 哈夫曼编码
- 最小生成树
- 字典序最小问题

**贪心策略**: 每步选择局部最优元素

### 3. 优化类问题

**特征**: 在约束条件下优化某个目标函数
**经典题目**:
- 分数背包
- 加油站问题
- 跳跃游戏

**贪心策略**: 按某种比值或效率排序

---

## 🔄 算法设计模式

### 1. 排序 + 贪心模式

**适用场景**: 大多数区间类、调度类问题
**设计步骤**:
1. 确定排序关键字
2. 设计贪心选择策略
3. 维护全局状态
4. 证明贪心选择的正确性

### 2. 优先队列 + 贪心模式

**适用场景**: 需要动态维护最值的问题
**设计步骤**:
1. 定义优先级比较函数
2. 维护优先队列
3. 每次取出最优元素做选择
4. 更新队列和状态

### 3. 双指针 + 贪心模式

**适用场景**: 需要同时考虑两端的问题
**设计步骤**:
1. 初始化两个指针
2. 根据贪心策略移动指针
3. 更新最优解
4. 直到指针相遇

---

## 📊 复杂度分析

### 时间复杂度

**主要开销**:
- **排序**: O(n log n) - 大多数贪心算法的瓶颈
- **贪心选择**: O(n) - 通常是线性遍历
- **状态维护**: O(1) 或 O(log n) - 取决于数据结构

**总复杂度**: 通常为O(n log n)

### 空间复杂度

**空间使用**:
- **排序空间**: O(log n) - 原地排序的递归栈
- **状态存储**: O(1) 到 O(n) - 取决于问题需求
- **结果存储**: 通常不计入额外空间

---

## 🎯 面试要点总结

### 必须掌握的技能

1. **贪心策略设计**: 能够识别和设计合适的贪心策略
2. **正确性证明**: 能够证明贪心选择的正确性
3. **排序技巧**: 熟练掌握各种排序策略的应用
4. **复杂度分析**: 准确分析贪心算法的时间空间复杂度

### 常见面试陷阱

1. **贪心失效**: 不是所有问题都能用贪心解决
2. **排序错误**: 排序策略错误导致贪心选择错误
3. **边界情况**: 空输入、单元素等特殊情况
4. **状态维护**: 忘记更新全局状态或约束条件

### 与其他算法的对比

**贪心 vs 动态规划**:
- 贪心：局部最优选择，不可回退
- DP：全局考虑，允许回溯

**贪心 vs 回溯**:
- 贪心：确定性选择，效率高
- 回溯：穷举所有可能，保证最优

**选择原则**: 能用贪心就不用DP，能证明贪心正确性是关键

---

## 📚 扩展学习方向

### 高级贪心技巧

1. **多关键字排序**: 复杂的排序策略设计
2. **在线算法**: 动态输入的贪心处理
3. **近似算法**: 贪心在近似算法中的应用

### 相关算法领域

1. **图论算法**: 最小生成树、最短路径
2. **网络流**: 最大流最小割的贪心应用
3. **组合优化**: 各种优化问题的贪心解法

---

*最后更新：2025-09-03*
*重点关注：56题合并区间的贪心策略与实现细节*